# rennie.org - AI-Generated Inspirational Content

Dynamic inspiration platform: AI-generated images for quotes and content using Nano Banana Pro API (Gemini 3 Pro Image).
**Project path:** `/Users/krennie/dev/rennie.org/`

## Tech Stack
- **Frontend:** Static HTML/CSS/JavaScript (no build process)
- **Backend:** Python scripts for image generation and site building
- **AI Generation:** Nano Banana API for image creation
- **Deployment:** GitHub Actions → DreamHost hosting
- **Content:** Markdown-based with frontmatter metadata

## Credit Usage Guidelines

**10s of lines** → Full steam ahead (content files, style tweaks, small scripts)
**100s of lines** → Go ahead, discuss if uncertain (new generators, major features)  
**1000s of lines** → Let's discuss strategy first (architecture changes)

## Project Structure

**Content Management:**
- `/content/inspiration/` - Individual markdown files for quotes/content
- `/content/styles/` - Reusable style templates for image generation
- Use frontmatter for metadata (title, author, tags, style reference)

**Scripts:**
- `/scripts/generate_images.py` - Nano Banana API integration
- `/scripts/build_site.py` - Static site generator
- `/scripts/content_parser.py` - Markdown and frontmatter parser
- `/bin/` - Bash scripts for operations (setup, generate, deploy)

**Generated Content:**
- `/generated/` - Images and processed content (gitignored)
- `/output/` - Deployable static site (gitignored)

## ⚠️ TEMPLATE SYSTEM WARNING

**CRITICAL**: Files in `/output/` are template-generated by `scripts/build_site.py` during deployment!

**❌ NEVER EDIT DIRECTLY**:
- `/output/script.js` (generated from `/scripts/templates/app.js`)
- `/output/style.css` (generated from `/scripts/templates/style.css`)  
- `/output/index.html` (generated from `/scripts/templates/index.html`)

**✅ ALWAYS EDIT SOURCE TEMPLATES**:
- Edit files in `/scripts/templates/` directory
- Changes to `/output/` files will be LOST during deployment
- See `docs/inspiration_site_build_notes.md` for full template management guide

**Development Workflow**: Create temporary files in `/output/` for testing (e.g., `script_carousel.js`), then move working code to source templates.

## Virtual Environment
**Location:** `/Users/krennie/dev/.venv/` (shared across all dev projects)
```bash
# Activate virtual environment
source ~/dev/.venv/bin/activate

# Install requirements
pip install -r scripts/requirements.txt
```

## Quick Commands

```bash
# Activate virtual environment first
source ~/dev/.venv/bin/activate

# Check image status (shows what needs generation or cleanup)
./bin/check-images.sh

# Generate images for new content (hybrid local-first workflow)
./bin/generate-new-images-locally.sh

# Clean up orphaned images (for deleted content or reduced variations)
./bin/cleanup-images.sh

# Commit and deploy locally generated images
./bin/commit-and-deploy.sh

# Legacy: Generate missing images only
./bin/generate-new.sh

# Legacy: Regenerate all images
./bin/regenerate-all.sh

# Regenerate all with archive (preserves old images before overwriting)
python scripts/generate_images.py --archive-and-regenerate

# Force regenerate all (overwrites without archiving)
python scripts/generate_images.py --force-all
```

## Image Archives

Old images are preserved in `generated/archive/` with timestamped folders:
```
generated/archive/
├── 2025-12-01_nano-banana-2.5/   # Manual archive of pre-upgrade images
│   ├── images/
│   └── metadata/
├── 2025-09-26_11-38/             # Auto-created by --archive-and-regenerate
└── cleanup_TIMESTAMP/            # Created by cleanup operations
```

**Best practice:** Use `--archive-and-regenerate` when doing major regenerations (e.g., model upgrades) to preserve the ability to compare or rollback.

## Content File Format

```markdown
---
title: "Make something people want"
author: "Paul Graham"
type: "quote"
source: "Y Combinator"
year: 2005
tags: ["startup", "entrepreneurship"]
style: "modern-inspirational"
status: "active"
---

Make something people want.

## Context
Additional context or notes about the quote...
```

## Style Library

Styles are defined in `/content/styles/styles.json`:
- `modern-inspirational` - Tech/startup aesthetic
- `classical-poetry` - Literary/romantic style
- Create new styles by adding to the JSON

## Development Workflow

1. **Add new content:** Create markdown file in `/content/inspiration/`
2. **Generate image:** Run `./bin/generate-new.sh`
3. **Build site:** Run `python scripts/build_site.py`
4. **Preview locally:** Run `./bin/preview-local.sh` (serves on http://localhost:8000 to avoid CORS issues)
5. **Deploy:** Run `./bin/deploy.sh` or push to trigger GitHub Actions

## Project Philosophy

**Personal Project Scale** - This is a personal inspiration site, not an enterprise application. We've learned to avoid over-engineering:

- **Right-sized solutions**: Prefer simple, maintainable code over enterprise patterns
- **Local-first workflow**: Immediate feedback over complex CI/CD when possible  
- **Stable, predictable naming**: Simple filename schemes over complex generation logic
- **Manual processes are OK**: Don't automate everything - some things are fine to do by hand

See `docs/workflow_architecture_analysis.md` and `docs/filename_refactoring_plan.md` for lessons learned about avoiding over-engineering.

## Session Management
- Keep it simple - this is a right-sized project
- Focus on content quality over complex features
- Manual testing is fine for this scale
- Use print statements for debugging (no complex logging needed)

## Current Status (Complete - Production Ready)
- ✅ **Project:** Production ready with sophisticated carousel and cinematic features
- ✅ **Structure:** Complete directory structure and automation
- ✅ **Scripts:** All Python and bash scripts implemented
- ✅ **Content:** 5 inspirational pieces with 15 AI-generated artwork variations
- ✅ **Features:** Full carousel with Ken Burns effects, touch gestures, fade transitions
- ✅ **Deployment:** Live at https://rennie.org via GitHub Actions
- ✅ **Model:** Nano Banana Pro (Gemini 3 Pro Image) - upgraded Dec 2024

Focus: Beautiful, inspiring content with minimal complexity. 80% of the value with 40% of the effort.